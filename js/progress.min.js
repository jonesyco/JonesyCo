(function(b,a){if(typeof exports==="object"){a(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],a)}else{a(b)}}}(this,function(l){var o="0.1.0";function n(q){if(typeof q.length!="undefined"){this._targetElement=q}else{this._targetElement=[q]}if(typeof window._progressjsId==="undefined"){window._progressjsId=1}if(typeof window._progressjsIntervals==="undefined"){window._progressjsIntervals={}}this._options={theme:"blue",overlayMode:false,considerTransition:true}}function k(){if(typeof this._onBeforeStartCallback!="undefined"){this._onBeforeStartCallback.call(this)}b.call(this);for(var r=0,q=this._targetElement.length;r<q;r++){j.call(this,this._targetElement[r])}}function j(u){if(u.hasAttribute("data-progressjs")){return}var v=d.call(this,u);u.setAttribute("data-progressjs",window._progressjsId);var s=document.createElement("div");s.className="progressjs-progress progressjs-theme-"+this._options.theme;if(u.tagName.toLowerCase()==="body"){s.style.position="fixed"}else{s.style.position="absolute"}s.setAttribute("data-progressjs",window._progressjsId);var r=document.createElement("div");r.className="progressjs-inner";var t=document.createElement("div");t.className="progressjs-percent";t.innerHTML="1%";r.appendChild(t);if(this._options.overlayMode&&u.tagName.toLowerCase()==="body"){s.style.left=0;s.style.right=0;s.style.top=0;s.style.bottom=0}else{s.style.left=v.left+"px";s.style.top=v.top+"px";s.style.width=v.width+"px";if(this._options.overlayMode){s.style.height=v.height+"px"}}s.appendChild(r);var q=document.querySelector(".progressjs-container");q.appendChild(s);i(u,1);++window._progressjsId}function h(s){for(var r=0,q=this._targetElement.length;r<q;r++){i.call(this,this._targetElement[r],s)}}function i(s,q){var r=this;if(q>=100){q=100}if(s.hasAttribute("data-progressjs")){setTimeout(function(){if(typeof r._onProgressCallback!="undefined"){r._onProgressCallback.call(r,s,q)}var u=e(s);u.style.width=parseInt(q)+"%";var u=u.querySelector(".progressjs-percent");var t=parseInt(u.innerHTML.replace("%",""));(function(A,x,w){var y=true;if(x>w){y=false}var z=10;function v(E,D,B){var C=Math.abs(D-B);if(C<3){z=30}else{if(C<20){z=20}else{intervanIn=1}}if((D-B)!=0){E.innerHTML=(y?(++D):(--D))+"%";setTimeout(function(){v(E,D,B)},z)}}v(A,x,w)})(u,t,parseInt(q))},50)}}function e(r){var q=parseInt(r.getAttribute("data-progressjs"));return document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+q+'"] > .progressjs-inner')}function a(t,q){var s=this;var r=parseInt(this._targetElement[0].getAttribute("data-progressjs"));if(typeof window._progressjsIntervals[r]!="undefined"){clearInterval(window._progressjsIntervals[r])}window._progressjsIntervals[r]=setInterval(function(){f.call(s,t)},q)}function f(v){for(var t=0,r=this._targetElement.length;t<r;t++){var q=this._targetElement[t];if(q.hasAttribute("data-progressjs")){var u=e(q);var s=parseInt(u.style.width.replace("%",""));if(s){i.call(this,q,s+(v||1))}}}}function c(){if(typeof this._onBeforeEndCallback!="undefined"){if(this._options.considerTransition===true){e(this._targetElement[0]).addEventListener(p(),this._onBeforeEndCallback,false)}else{this._onBeforeEndCallback.call(this)}}var w=parseInt(this._targetElement[0].getAttribute("data-progressjs"));for(var u=0,r=this._targetElement.length;u<r;u++){var q=this._targetElement[u];var v=e(q);if(!v){return}var t=parseInt(v.style.width.replace("%",""));var x=1;if(t<100){i.call(this,q,100);x=500}(function(z,y){setTimeout(function(){z.parentNode.className+=" progressjs-end";setTimeout(function(){z.parentNode.parentNode.removeChild(z.parentNode);y.removeAttribute("data-progressjs")},1000)},x)})(v,q)}if(window._progressjsIntervals[w]){try{clearInterval(window._progressjsIntervals[w]);window._progressjsIntervals[w]=null;delete window._progressjsIntervals[w]}catch(s){}}}function b(){if(!document.querySelector(".progressjs-container")){var q=document.createElement("div");q.className="progressjs-container";document.body.appendChild(q)}}function d(s){var t={};if(s.tagName.toLowerCase()==="body"){t.width=s.clientWidth;t.height=s.clientHeight}else{t.width=s.offsetWidth;t.height=s.offsetHeight}var q=0;var r=0;while(s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop)){q+=s.offsetLeft;r+=s.offsetTop;s=s.offsetParent}t.top=r;t.left=q;return t}function g(r,s){var t={};for(var q in r){t[q]=r[q]}for(var q in s){t[q]=s[q]}return t}var m=function(r){if(typeof(r)==="object"){return new n(r)}else{if(typeof(r)==="string"){var q=document.querySelectorAll(r);if(q){return new n(q)}else{throw new Error("There is no element with given selector.")}}else{return new n(document.body)}}};function p(){var r;var q=document.createElement("fakeelement");var s={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(r in s){if(q.style[r]!==undefined){return s[r]}}}m.version=o;m.fn=n.prototype={clone:function(){return new n(this)},setOption:function(q,r){this._options[q]=r;return this},setOptions:function(q){this._options=g(this._options,q);return this},start:function(){k.call(this);return this},set:function(q){h.call(this,q);return this},increase:function(q){f.call(this,q);return this},autoIncrease:function(r,q){a.call(this,r,q);return this},end:function(){c.call(this);return this},onbeforeend:function(q){if(typeof(q)==="function"){this._onBeforeEndCallback=q}else{throw new Error("Provided callback for onbeforeend was not a function")}return this},onbeforestart:function(q){if(typeof(q)==="function"){this._onBeforeStartCallback=q}else{throw new Error("Provided callback for onbeforestart was not a function")}return this},onprogress:function(q){if(typeof(q)==="function"){this._onProgressCallback=q}else{throw new Error("Provided callback for onprogress was not a function")}return this}};l.progressJs=m;return m}));